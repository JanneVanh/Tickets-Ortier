<div class="reservation-summary">
    <h1 class="title">Samenvatting</h1>
    <div class="info-card">
        <div class="card-content">
            <div class="space-y-2">
                <dl class="flex items-center justify-between gap-4">
                    <dt class="font-medium">Zaterdag</dt>
                    <dd class="font-medium">
                        {{ sumTotalSaturday }}
                    </dd>
                </dl>
                <dl class="flex items-center justify-between gap-4">
                    <dt class="font-medium">Zondag</dt>
                    <dd class="font-medium">
                        {{ sumTotalSunday }}
                    </dd>
                </dl>
            </div>

            <dl class="flex items-center justify-between gap-4 border-t border-gray-200 pt-2">
                <dt class="font-medium total">Totaal</dt>
                <dd class="font-medium total">
                    {{ total }}
                </dd>
            </dl>
        </div>
    </div>

</div>

<div class="reservation-overview">
    <h1 class="title">Overzicht reservaties</h1>
    <div class="filter-container">
        <div class="filter-reservations">
            <mat-form-field class="search-field">
                <mat-label>Zoek op code</mat-label>
                <input matInput [(ngModel)]="searchCode" (input)="filterByCode()" placeholder="Voer betalingscode in">
                <mat-icon matSuffix>search</mat-icon>
            </mat-form-field>
            <mat-slide-toggle [(ngModel)]="showOnlyUnpaid" (change)="toggleUnpaidFilter()" class="unpaid-toggle">
                Alleen onbetaalde reserveringen
            </mat-slide-toggle>
        </div>

        <div class="send-tickets">
            <button mat-raised-button (click)="sendTickets()">
                <mat-icon>mail</mat-icon>
                <span>{{sendingTickets ? "Tickets versturen ..." : "Stuur tickets"}}</span>
            </button>
        </div>
    </div>

    @if (dataSource.data.length > 0)
    {
    <table mat-table [dataSource]="dataSource">

        <!-- ID Column -->
        <ng-container matColumnDef="ID">
            <th mat-header-cell *matHeaderCellDef> ID </th>
            <td mat-cell *matCellDef="let element"> {{element.id}} </td>
        </ng-container>

        <!-- Email Column -->
        <ng-container matColumnDef="Email">
            <th mat-header-cell *matHeaderCellDef> Email </th>
            <td mat-cell *matCellDef="let element"> {{element.email}} </td>
        </ng-container>

        <!-- Show Column -->
        <ng-container matColumnDef="Show">
            <th mat-header-cell *matHeaderCellDef> Show </th>
            <td mat-cell *matCellDef="let element"> {{element.showId}} </td>
        </ng-container>

        <!-- Volwassenen Column -->
        <ng-container matColumnDef="Volwassenen">
            <th mat-header-cell *matHeaderCellDef> Volwassenen </th>
            <td mat-cell *matCellDef="let element"> {{element.numberOfAdults}} </td>
        </ng-container>

        <!-- Kinderen Column -->
        <ng-container matColumnDef="Kinderen">
            <th mat-header-cell *matHeaderCellDef> Kinderen </th>
            <td mat-cell *matCellDef="let element"> {{element.numberOfChildren}} </td>
        </ng-container>

        <!-- Totaal Column -->
        <ng-container matColumnDef="Totaal">
            <th mat-header-cell *matHeaderCellDef> Totaal </th>
            <td mat-cell *matCellDef="let element"> â‚¬{{(element.numberOfAdults * 15) + (element.numberOfChildren * 8)}}
            </td>
        </ng-container>

        <!-- Code Column -->
        <ng-container matColumnDef="Code">
            <th mat-header-cell *matHeaderCellDef> Code </th>
            <td mat-cell *matCellDef="let element"> {{element.paymentCode || 'Geen code'}} </td>
        </ng-container>

        <!-- isPaid Column -->
        <ng-container matColumnDef="isPaid">
            <th mat-header-cell *matHeaderCellDef> Is betaald </th>
            <td mat-cell *matCellDef="let element">
                <mat-checkbox [checked]="element.isPaid" (change)="togglePaidStatus(element)">
                </mat-checkbox>
            </td>
        </ng-container>

        <!-- emailSent Column -->
        <ng-container matColumnDef="emailSent">
            <th mat-header-cell *matHeaderCellDef> Tickets verzonden </th>
            <td mat-cell *matCellDef="let element">
                <mat-checkbox [checked]="element.emailSent" disabled>
                </mat-checkbox>
            </td>
        </ng-container>

        <!-- delete Column -->
        <ng-container matColumnDef="Delete">
            <th mat-header-cell *matHeaderCellDef> Verwijderen </th>
            <td mat-cell *matCellDef="let element">
                <button mat-button>
                    <mat-icon color="warn" (click)="deleteReservation(element.id)">delete</mat-icon>
                </button>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
        <tr mat-row *matRowDef="let myRowData; columns: columnsToDisplay"></tr>
    </table>
    }

    <mat-paginator #paginator [pageSizeOptions]="[5, 10, 25, 50]" [pageSize]="10" [length]="dataSource.data.length"
        showFirstLastButtons>
    </mat-paginator>
</div>