<div class="seat-overview-container">
  @if (loading) {
  <div class="loading-message">
    <p>Stoelen laden...</p>
  </div>
  } @else if (showId && seats.length > 0) {
  <div class="seat-section">
    <div class="seat-information">
      <div class="legend">
        <div class="legend-item">
          <div class="legend-seat seat-available"></div>
          <span>Beschikbaar</span>
        </div>
        <div class="legend-item">
          <div class="legend-seat seat-reserved"></div>
          <span>Gereserveerd</span>
        </div>
        <div class="legend-item">
          <div class="legend-seat seat-selected"></div>
          <span>Geselecteerd voor jou</span>
        </div>
        <div class="legend-item">
          <div class="legend-seat seat-wheelchair">♿</div>
          <span>Rolstoel toegankelijk</span>
        </div>
      </div>

      <div class="seat-summary">
        <h3>Samenvatting</h3>
        <p>Je krijgt <strong>{{ getSelectedSeatsCount() }}</strong> stoel(en) toegewezen</p>
        <p>voor de show op {{showDay}}</p>
        <div class="selected-seats-list">
          @for (seat of getSelectedSeats(); track trackBySeat($index, seat)) {
          <span class="selected-seat-item">
            {{ seat.row }}{{ seat.number }}
          </span>
          }
        </div>
        <p>wijzigen kan door op de geselecteerde stoelen te klikken.</p>
        <button mat-raised-button (click)="onSubmit()" class="navigation-button"
          [disabled]="getSelectedSeatsCount() !== reservationService.totalSeats()">
          {{ getSelectedSeatsCount() !== reservationService.totalSeats() ? `Kies ${reservationService.totalSeats()} stoelen` : "Reserveer" }}
        </button>
      </div>

      <div class="cancel">
        <button mat-raised-button (click)="cancel()" class="navigation-button">Annuleer</button>
      </div>
    </div>

    <div class="seat-grid">
      <div class="theater-screen">
        <div class="screen-label">Podium</div>
      </div>

      @for (row of seats; let i = $index; track trackByRow(i, row)) {
      <div class="row" [ngClass]="{'wheelchair-row': row.length > 0 && row[0].isWheelchair}">
        <span class="row-label">{{ getRowLabel(i) }}</span>
        <div class="seats-container" [ngClass]="{'wheelchair-seats': row.length > 0 && row[0].isWheelchair}">
          @for (seat of row; track trackBySeat($index, seat)) {
          <button type="button" class="seat" [ngClass]="{
              'seat-available': seat.status === SeatStatus.Available && !seat.isWheelchair,
              'seat-reserved': seat.status === SeatStatus.Reserved,
              'seat-selected': seat.status === SeatStatus.Selected,
              'seat-wheelchair': seat.isWheelchair && seat.status === SeatStatus.Available,
              'seat-wheelchair-selected': seat.isWheelchair && seat.status === SeatStatus.Selected
            }" [attr.aria-label]="'Seat ' + getRowLabel(i) + seat.number + ' - ' + getSeatStatusText(seat.status) + (seat.isWheelchair ? ' (Wheelchair Accessible)' : '')"
            (click)="selectSeat(seat)">
            @if (seat.isWheelchair) {
              <span class="wheelchair-icon">♿</span>
            } @else {
              {{ seat.number }}
            }
          </button>
          }
        </div>
        <span class="row-label">{{ getRowLabel(i) }}</span>
      </div>
      }
    </div>
  </div>
  }

  @if (showId && seats.length === 0 && !loading) {
  <div class="no-seats-message">
    <p>Geen stoelen beschikbaar voor deze show.</p>
  </div>
  }
</div>